name: Build Mod Template

on:
  workflow_dispatch:

jobs:
  build-template:
    runs-on: ubuntu-latest
    steps:
      # 1️⃣ Checkout Repo
      - uses: actions/checkout@v4

      # 2️⃣ Setup .NET 6
      - name: Setup .NET 6
        uses: actions/setup-dotnet@v3
        with:
          dotnet-version: '6.0.x'

      # 3️⃣ Restore NuGet Packages
      - name: Restore NuGet Packages
        run: dotnet restore MyModTemplate/MyModTemplate.sln

      # 4️⃣ Build the Class Library (Release)
      - name: Build Template DLL
        run: dotnet build MyModTemplate/MyModTemplate.sln --configuration Release

      # 5️⃣ Copy DLL to GamePath (wie beim DLL-Builder)
      - name: Copy DLL to GamePath
        run: |
          mkdir -p DLL-Builder/input/stardew
          cp MyModTemplate/bin/Release/net6.0/MyModTemplate.dll DLL-Builder/input/stardew/
